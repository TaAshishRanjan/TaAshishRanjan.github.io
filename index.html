<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashish Ranjan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f0f8ff;
        }
        header {
            background-color: #4CAF50;
            padding: 10px;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 24px;
            color: white;
        }
        nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            background-color: #333;
        }
        nav a {
            padding: 14px 20px;
            display: block;
            color: white;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
        }
        nav a:hover {
            background-color: #ddd;
            color: black;
        }
        .container {
            display: none;
            flex-direction: column;
            align-items: flex-start;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
        }
        .container.show {
            display: flex;
        }
        .headline {
            font-size: 20px;
            margin-top: 20px;
        }
        .contact-info {
            margin-top: 20px;
            font-size: 18px;
        }
        .contact-info a {
            color: #4CAF50;
            text-decoration: none;
        }
        .contact-info a:hover {
            text-decoration: underline;
        }
        .my-view, .projects {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
        }
        .my-view textarea, .projects textarea {
            width: 100%;
            height: 100px;
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .my-view input[type="text"], .projects input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        .my-view button, .projects button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .my-view button:hover, .projects button:hover {
            background-color: #45a049;
        }
        .my-view .entries, .projects .entries {
            margin-top: 20px;
        }
        .entry {
            margin-bottom: 10px;
        }
        .entry a {
            color: #4CAF50;
            text-decoration: none;
        }
        .entry a:hover {
            text-decoration: underline;
        }
        .entry-options {
            display: inline;
            margin-left: 10px;
            font-size: 12px;
            color: #888;
        }
        .entry-options button {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            padding: 0;
            margin: 0 5px;
        }
        .entry-comments {
            margin-top: 10px;
            padding-left: 20px;
        }
        .entry-comments textarea {
            width: 100%;
            height: 100px;
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .entry-comments button {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .entry-comments button:hover {
            background-color: #45a049;
        }
        .content-display {
            margin-top: 20px;
            padding: 20px;
            background: #fff;
            border: 1px solid #ddd;
            width: 100%;
            box-sizing: border-box;
            display: none; /* Hide by default */
        }
        .comment-toggle-btn {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Ashish Ranjan</h1>
    </header>
    <nav>
        <a onclick="showSection('home')">Home</a>
        <a onclick="showSection('projects')">Technical Projects</a>
        <a onclick="showSection('my-view')">My View</a>
        <a onclick="showSection('contact')">Contact</a>
    </nav>
    <div id="home" class="container show">
        <div class="headline">
            <h1>I know almost nothing is only think I know.</h1>
        </div>
    </div>
    <div id="projects" class="container">
        <div class="headline">
            <h1>Technical Projects</h1>
        </div>
        <div class="projects">
            <button onclick="showEditor('project')">Create New Project</button>
            <div id="project-editor" style="display:none;">
                <input type="text" id="projectTitle" placeholder="Project Title">
                <textarea id="projectText" placeholder="Write your project details here..."></textarea>
                <input type="file" id="projectImage" accept="image/*">
                <button onclick="saveProject()">Save Project</button>
            </div>
            <div class="entries" id="project-entries">
                <!-- Project entries will be dynamically added here -->
            </div>
        </div>
    </div>
    <div id="my-view" class="container">
        <div class="my-view">
            <button onclick="showEditor('view')">Create New View</button>
            <div id="view-editor" style="display:none;">
                <input type="text" id="viewTitle" placeholder="View Title">
                <textarea id="myViewText" placeholder="Write your thoughts here..."></textarea>
                <input type="file" id="viewImage" accept="image/*">
                <button onclick="saveMyView()">Save View</button>
            </div>
            <div class="entries" id="view-entries">
                <!-- View entries will be dynamically added here -->
            </div>
        </div>
    </div>
    <div id="contact" class="container">
        <div class="contact-info">
            <p>Contact me:</p>
            <p>Email: <a href="mailto:bi.ashishr@gmail.com">bi.ashishr@gmail.com</a></p>
            <p>LinkedIn: <a href="https://www.linkedin.com/in/ashish-ranjan173" target="_blank">ashish-ranjan173</a></p>
            <p>Instagram: <a href="https://www.instagram.com/ashish_ranjan87?igsh=MWlpeWo3cHJuaGlvbg==" target="_blank">ashish_ranjan87</a></p>
            <!-- Add more links as needed -->
        </div>
    </div>
    <div id="content-display" class="container content-display">
        <h2 id="content-title"></h2>
        <div id="content-text"></div>
        <div id="comment-section">
            <textarea id="commentText" placeholder="Add a comment..."></textarea>
            <button onclick="saveComment()" class="comment-toggle-btn">Submit Comment</button>
            <div id="comments-list">
                <!-- Comments will be dynamically added here -->
            </div>
        </div>
        <button onclick="toggleCommentSection()" class="comment-toggle-btn">Add a Comment</button>
    </div>
    <script>
        const password = "Asarfi@Chuski"; // Set your password here
        let currentEntryId = null;
        let currentEntryType = null;

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.container');
            sections.forEach(section => {
                section.classList.remove('show');
            });
            document.getElementById(sectionId).classList.add('show');
            discardUnsavedComments();
            hideContentDisplay(); // Hide the content-display when switching sections
        }

        function showEditor(type) {
            const userPassword = prompt("Enter the password to create content:");
            if (userPassword === password) {
                if (type === 'project') {
                    document.getElementById('project-editor').style.display = 'block';
                    document.getElementById('view-editor').style.display = 'none';
                } else if (type === 'view') {
                    document.getElementById('view-editor').style.display = 'block';
                    document.getElementById('project-editor').style.display = 'none';
                }
                currentEntryId = null; // Reset currentEntryId to ensure a new entry is being created
            } else {
                alert("Incorrect password. You are not authorized to create content.");
            }
        }

        function saveProject() {
            const projectTitle = document.getElementById('projectTitle').value;
            const projectText = document.getElementById('projectText').value;
            const projectImage = document.getElementById('projectImage').files[0];

            if (projectTitle.trim() !== '' && projectText.trim() !== '') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageDataUrl = e.target.result;
                    const content = projectText.replace(/\n/g, '<br>') + (projectImage ? `<br><img src="${imageDataUrl}" alt="Project Image">` : '');
                    const projects = JSON.parse(localStorage.getItem('projects')) || [];
                    const project = projects.find(p => p.id === currentEntryId);
                    if (project) {
                        // Update existing project
                        project.title = projectTitle;
                        project.text = content;
                    } else {
                        // Create new project
                        const newProject = { id: Date.now(), title: projectTitle, text: content, comments: [] };
                        projects.push(newProject);
                    }
                    localStorage.setItem('projects', JSON.stringify(projects));
                    loadEntries();
                    document.getElementById('projectTitle').value = '';
                    document.getElementById('projectText').value = '';
                    document.getElementById('projectImage').value = '';
                    document.getElementById('project-editor').style.display = 'none';
                    currentEntryId = null;
                };
                if (projectImage) {
                    reader.readAsDataURL(projectImage);
                } else {
                    reader.onload({ target: { result: '' } });
                }
            }
        }

        function saveMyView() {
            const viewTitle = document.getElementById('viewTitle').value;
            const myViewText = document.getElementById('myViewText').value;
            const viewImage = document.getElementById('viewImage').files[0];

            if (viewTitle.trim() !== '' && myViewText.trim() !== '') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageDataUrl = e.target.result;
                    const content = myViewText.replace(/\n/g, '<br>') + (viewImage ? `<br><img src="${imageDataUrl}" alt="View Image">` : '');
                    const views = JSON.parse(localStorage.getItem('views')) || [];
                    const view = views.find(v => v.id === currentEntryId);
                    if (view) {
                        // Update existing view
                        view.title = viewTitle;
                        view.text = content;
                    } else {
                        // Create new view
                        const newView = { id: Date.now(), title: viewTitle, text: content, comments: [] };
                        views.push(newView);
                    }
                    localStorage.setItem('views', JSON.stringify(views));
                    loadEntries();
                    document.getElementById('viewTitle').value = '';
                    document.getElementById('myViewText').value = '';
                    document.getElementById('viewImage').value = '';
                    document.getElementById('view-editor').style.display = 'none';
                    currentEntryId = null;
                };
                if (viewImage) {
                    reader.readAsDataURL(viewImage);
                } else {
                    reader.onload({ target: { result: '' } });
                }
            }
        }

        function deleteEntry(id, type) {
            const userPassword = prompt("Enter the password to delete content:");
            if (userPassword === password) {
                const entries = JSON.parse(localStorage.getItem(type + 's')) || [];
                const updatedEntries = entries.filter(entry => entry.id !== id);
                localStorage.setItem(type + 's', JSON.stringify(updatedEntries));
                loadEntries();
                hideContentDisplay(); // Hide content display after deleting an entry
            } else {
                alert("Incorrect password. You are not authorized to delete content.");
            }
        }

        function editEntry(id, type) {
            const userPassword = prompt("Enter the password to edit content:");
            if (userPassword === password) {
                const entries = JSON.parse(localStorage.getItem(type + 's')) || [];
                const entry = entries.find(e => e.id === id);
                currentEntryId = id;
                if (type === 'project') {
                    document.getElementById('projectTitle').value = entry.title;
                    document.getElementById('projectText').value = entry.text.replace(/<br><img.*?>/g, '').replace(/<br>/g, '\n');
                    const imgMatch = entry.text.match(/<img.*?src="(.*?)"/);
                    if (imgMatch) {
                        document.getElementById('projectImage').value = ''; // Clear the file input
                        entry.existingImageUrl = imgMatch[1]; // Store the existing image URL to show in the editor if needed
                    } else {
                        document.getElementById('projectImage').value = '';
                        delete entry.existingImageUrl;
                    }
                    document.getElementById('project-editor').style.display = 'block';
                } else if (type === 'view') {
                    document.getElementById('viewTitle').value = entry.title;
                    document.getElementById('myViewText').value = entry.text.replace(/<br><img.*?>/g, '').replace(/<br>/g, '\n');
                    const imgMatch = entry.text.match(/<img.*?src="(.*?)"/);
                    if (imgMatch) {
                        document.getElementById('viewImage').value = ''; // Clear the file input
                        entry.existingImageUrl = imgMatch[1]; // Store the existing image URL to show in the editor if needed
                    } else {
                        document.getElementById('viewImage').value = '';
                        delete entry.existingImageUrl;
                    }
                    document.getElementById('view-editor').style.display = 'block';
                }
            } else {
                alert("Incorrect password. You are not authorized to edit content.");
            }
        }

        function addProjectEntry(project) {
            const entry = document.createElement('div');
            entry.className = 'entry';
            entry.innerHTML = `
                <a href="#" onclick="viewEntry(${project.id}, 'project')">${project.title}</a>
                <span class="entry-options">
                    <button onclick="editEntry(${project.id}, 'project')">Edit</button>
                    <button onclick="deleteEntry(${project.id}, 'project')">Delete</button>
                </span>
            `;
            document.getElementById('project-entries').appendChild(entry);
        }

        function addViewEntry(view) {
            const entry = document.createElement('div');
            entry.className = 'entry';
            entry.innerHTML = `
                <a href="#" onclick="viewEntry(${view.id}, 'view')">${view.title}</a>
                <span class="entry-options">
                    <button onclick="editEntry(${view.id}, 'view')">Edit</button>
                    <button onclick="deleteEntry(${view.id}, 'view')">Delete</button>
                </span>
            `;
            document.getElementById('view-entries').appendChild(entry);
        }

        function viewEntry(id, type) {
            currentEntryId = id;
            currentEntryType = type;
            const entries = JSON.parse(localStorage.getItem(type + 's')) || [];
            const entry = entries.find(e => e.id === id);
            if (entry) {
                document.getElementById('content-title').textContent = entry.title;
                document.getElementById('content-text').innerHTML = entry.text;
                document.getElementById('content-display').style.display = 'block';
                document.getElementById('comment-section').style.display = 'block';
                loadComments(id, type);
                showSection('content-display');
            }
        }

        function saveComment() {
            const commentText = document.getElementById('commentText').value;
            if (commentText.trim() !== '') {
                const entries = JSON.parse(localStorage.getItem(currentEntryType + 's')) || [];
                const entry = entries.find(e => e.id === currentEntryId);
                entry.comments.push(commentText);
                localStorage.setItem(currentEntryType + 's', JSON.stringify(entries));
                addCommentToList(currentEntryId, commentText, currentEntryType);
                document.getElementById('commentText').value = '';
            }
        }

        function addCommentToList(id, commentText, type) {
            const commentDiv = document.createElement('div');
            commentDiv.textContent = commentText;
            document.getElementById('comments-list').appendChild(commentDiv);
        }

        function loadComments(id, type) {
            const entries = JSON.parse(localStorage.getItem(type + 's')) || [];
            const entry = entries.find(e => e.id === id);
            const commentsList = document.getElementById('comments-list');
            commentsList.innerHTML = '';
            entry.comments.forEach(comment => {
                addCommentToList(id, comment, type);
            });
        }

        function toggleCommentSection() {
            const commentSection = document.getElementById('comment-section');
            if (commentSection.style.display === 'none' || commentSection.style.display === '') {
                commentSection.style.display = 'block';
            } else {
                commentSection.style.display = 'none';
            }
        }

        function loadEntries() {
            document.getElementById('project-entries').innerHTML = '';
            document.getElementById('view-entries').innerHTML = '';
            const projects = JSON.parse(localStorage.getItem('projects')) || [];
            projects.forEach(addProjectEntry);
            const views = JSON.parse(localStorage.getItem('views')) || [];
            views.forEach(addViewEntry);
        }

        function discardUnsavedComments() {
            document.getElementById('commentText').value = '';
            document.getElementById('comment-section').style.display = 'none';
        }

        function hideContentDisplay() {
            document.getElementById('content-display').style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', loadEntries);
    </script>
</body>
</html>
